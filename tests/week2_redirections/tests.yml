- name: Redirection Simple
  stdin: echo ok > toto; cat toto; rm toto
  checks:
    - stdout
    - returncode

- name: Redirection within an if case
  stdin: if echo ok > toto; cat toto; then echo "food"; fi; rm toto
  checks:
    - stdout
    - returncode

- name: Redirection stdin
  stdin: touch toto; cat < toto; rm toto;

- name: Redirection simple - check if override
  stdin: echo ok > toto; cat toto; rm toto
  checks:
    - stdout
    - returncode

- name: Redirection without a command
  options:
    - "-c"
    - "> toto"

- name: Redirection of a whole command
  stdin: if echo ok; then echo good; fi > toto; cat toto; rm toto
  checks:
    - stdout
    - returncode

- name: Redirection of a command - redirector at beginning of line
  stdin: if > toto echo ok; cat toto; then echo ko; fi; rm toto
  checks:
    - stdout
    - returncode

- name: Redirection of stderr to file to stdout
  stdin: ech ok 2> toto; cat toto; rm toto
  checks:
    - has_stdout
    - returncode

- name: ech ok 2> toto ech ok
  stdin: ech ok 2> toto ech ok
  checks:
    - returncode

- name: ech ok 2> toto echo ok
  stdin: ech ok 2> toto echo ok
  checks:
    - returncode

- name: echo ok 2> toto ech ok
  stdin: echo ok 2> toto ech ok
  checks:
    - stdout
    - returncode

- name: echo ok 4> toto 3<&4 >&3
  stdin: echo ok 4> toto 3<&4 >&3; cat toto; rm toto
  checks:
    - stdout
    - returncode

- name: echo ok > titi > tata echo ok (check content of titi)
  stdin: |
    echo ok > titi > tata echo ok
    cat titi tata
    rm titi tata
  checks:
    - stdout
    - returncode

- name: toto ech ok > titi > tutu 2>&1 echo ok
  stdin: toto ech ok > titi > tutu 2>&1 echo ok
  checks:
   - stdout
   - returncode
  stdin: cat tutu; rm tutu titi
  checks:
   - stdout
   - returncode

- name: find > toto; cat <> toto
  stdin: find > toto; cat <> toto
  checks:
   - stdout
   - returncode
  stdin: cat toto; rm toto
  checks:
   - stdout
   - returncode

- name: find > toto 2>&1; cat < toto
  stdin: find > toto 2>&1; cat < toto
  checks:
   - stdout
   - returncode
  stdin: cat toto; rm toto
  checks:
   - stdout
   - returncode

- name: echo ok 3>tata 4>titi 5>tutu 6>toto 6<&5 5<&4 4<&3 3<&5 verifier tutu
  stdin: echo ok 3>tata 4>titi 5>tutu 6>toto 6<&5 5<&4 4<&3 3<&5 verifier tutu
  checks:
   - stdout
   - returncode
  stdin: cat tata
  stdin: cat titi
  stdin: cat tutu
  stdin: cat toto
  stdin: rm tata titi tutu toto
