- name: Redirection Simple
  stdin: echo ok > toto; cat toto; rm toto
  checks:
    - stdout
    - returncode

- name: Redirection within an if case
  stdin: if echo ok > toto; cat toto; then echo food; fi; rm toto
  checks:
    - stdout
    - returncode

- name: Redirection stdin
  stdin: touch toto; cat < toto; rm toto;

- name: Redirection simple - check if override
  stdin: echo ok > toto; cat toto; rm toto
  checks:
    - stdout
    - returncode

- name: Redirection without file
  stdin: echo ok >
  checks:
    - has_stderr
    - returncode

- name: Redirection without a command
  options:
    - "-c"
    - "> toto"

- name: Redirection of a whole command
  stdin: if echo ok; then echo good; fi > toto; cat toto; rm toto
  checks:
    - stdout
    - returncode

- name: Redirection of a command - redirector at beginning of line
  stdin: if > toto echo ok; cat toto; then echo ko; fi; rm toto
  checks:
    - stdout
    - returncode

- name: Redirection of stderr to file to stdout
  stdin: ech ok 2> toto; cat toto; rm toto
  checks:
    - has_stdout
    - returncode

- name: ech ok 2> toto ech ok
  stdin: ech ok 2> toto ech ok
  checks:
    - returncode

- name: ech ok 2> toto echo ok
  stdin: ech ok 2> toto echo ok
  checks:
    - returncode

- name: echo ok 2> toto ech ok
  stdin: echo ok 2> toto ech ok
  checks:
    - returncode
    - stdout

- name: rm toto (succeeds only if previous rederictions tests do)
  stdin: rm toto

- name: echo ok > titi > tata echo ok (check content of titi)
  stdin: |
    echo ok > titi > tata echo ok
    cat titi tata
    rm titi tata
  checks:
    - stdout
    - returncode

#DOUBLE REDIRECTION

- name: Redirection append
  stdin: |
    echo good >> toto
    echo papa >> toto
    cat toto
    rm toto
  checks: |
    - stdout
    - returncode
    - has_stderr
